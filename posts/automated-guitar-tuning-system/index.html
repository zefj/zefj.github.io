<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charset="UTF-8"><style>:where(img){height:auto}</style><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://frec.pl/posts/automated-guitar-tuning-system/"><meta name="generator" content="Astro v4.11.5"><!-- General Meta Tags --><title>Automated guitar tuning system | frec.pl</title><meta name="title" content="Automated guitar tuning system | frec.pl"><meta name="description" content="My contribution to the Internet pollution"><meta name="author" content="Filip Rec"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="Automated guitar tuning system | frec.pl"><meta property="og:description" content="My contribution to the Internet pollution"><meta property="og:url" content="https://frec.pl/posts/automated-guitar-tuning-system/"><meta property="og:image" content="https://frec.pl/posts/automated-guitar-tuning-system.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2016-01-01T00:00:00.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://frec.pl/posts/automated-guitar-tuning-system/"><meta property="twitter:title" content="Automated guitar tuning system | frec.pl"><meta property="twitter:description" content="My contribution to the Internet pollution"><meta property="twitter:image" content="https://frec.pl/posts/automated-guitar-tuning-system.png"><!-- Google Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&amp;display=swap" rel="stylesheet"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script src="/toggle-theme.js"></script><link rel="stylesheet" href="/assets/index.l02VUe7S.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/assets/hoisted.Oozc_hRb.js"></script><style>[data-astro-transition-scope=astro-fam6wyqg-1]{view-transition-name:automated-guitar-tuning-system}@layer astro{::view-transition-old(automated-guitar-tuning-system){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(automated-guitar-tuning-system){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(automated-guitar-tuning-system){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(automated-guitar-tuning-system){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style></head> <body>  <header class="astro-3ef6ksr2"> <a id="skip-to-content" href="#main-content" class="astro-3ef6ksr2">Skip to content</a> <div class="astro-3ef6ksr2 nav-container"> <a href="/" class="astro-3ef6ksr2 logo whitespace-nowrap"> frec.pl </a> <nav id="nav-menu" class="astro-3ef6ksr2"> <ul id="menu-items" class="astro-3ef6ksr2 flex"> <li class="astro-3ef6ksr2"> <a href="/posts/" class="astro-3ef6ksr2">
Posts
</a> </li> <li class="astro-3ef6ksr2"> <label id="theme-button" for="dark-mode" class="astro-g6q3pnbr theme-button" aria-label="Switch theme" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <div class="astro-g6q3pnbr switch" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <input id="dark-mode" type="checkbox" class="astro-g6q3pnbr" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <div class="astro-g6q3pnbr insetcover" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <div class="astro-g6q3pnbr sun-moon sun" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> <div class="astro-g6q3pnbr sun-moon moon" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> <div class="astro-g6q3pnbr stars" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> </div> <div class="astro-g6q3pnbr sun-moon-shadow" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> <div class="astro-g6q3pnbr shadow-overlay" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> </div> </label>  </li> </ul> </nav> </div> <div class="max-w-3xl mx-auto px-4"> <hr class="border-skin-line" aria-hidden="true"> </div> </header>  <main id="main-content" class="max-w-3xl mx-auto px-4 mt-8 pb-4 w-full"> <div class="mb-2"> <h1 class="font-semibold sm:text-3xl text-2xl">  <span class="text-skin-accent" data-astro-transition-scope="astro-fam6wyqg-1"> Automated guitar tuning system </span>  </h1> </div> <div class="mb-2">  <div class="flex items-center flex-wrap"><span class="text-base"><span class="sr-only">Published:</span><time datetime="2016-01-01T00:00:00.000Z" title="2016-01-01T00:00:00.000Z">Sometime in <!-- -->2016</time><span class="mx-1">•</span></span><div class="flex gap-1"><a href="/tags/electronics/" class="group hover:text-skin-accent relative text-base underline underline-offset-4 whitespace-nowrap"><span>#<!-- -->electronics</span></a></div></div>  </div>    <article id="article" role="article" class="max-w-3xl mx-auto my-8 prose"> <p>I’ve graduated from the Westpomeranian University of Technology in Szczecin, Poland. This means I’m now officially an engineer. The automated guitar tuning system was built for my thesis, you can read the abstract below:</p>
<blockquote>
<p>HARDWARE AND SOFTWARE SYNTHESIS OF A STRINGED INSTRUMENTS TUNING SYSTEM
Engineer’s thesis, Filip Rec, 2016</p>
<p>Abstract</p>
<p>Keeping a guitar in tune proves to be problematic for novice musicians around the world. A wide variety of electronic devices that indicate pitch is available on the market, however, properly using those implies certain knowledge of music theory, such as guitar tunings, and pitches that belong to them. The purpose of this research was to develop a prototype of an automated guitar tuning system, that would aid the user in this activity by estimating the pitch and rotating the guitar key appropriately. Using the Raspberry Pi and an algorithm with the autocorrelation method, it was possible to track the pitch of a captured audio sample with high precision. To achieve the goal, it was necessary for the frequency measurement to be conducted in near real-time, which required the instrument to be plugged into a sound card to allow constant data stream. Several tests confirmed that Raspberry Pi with Linux operating system handles simultaneous measurements and pulse-width modulation relatively well. Joined by a continuous rotation servomechanism and a PID regulator, the system is able to tune any string to the set point in a matter of seconds. In addition, the prototype was equipped with a touchscreen with graphical user interface, that allows easy control over the process and its basic settings, and guides the user by displaying notifications. Conducted tests confirmed that high accuracy and tuning speed were achieved no matter the instrument quality, and that any potential tuning error is mostly unnoticeable by an average guitarist.</p>
</blockquote>
<p>The tuner is a prototype, it was intended to be a proof-of-concept. It is not&nbsp;ideal, which is why I will not be doing any tutorials, or DIY posts. I consider this project over, it made me an engineer and I think it’s time to move on :)</p>
<p>It was a pain to tune the PID regulator, because the guitar keys are not consistent which makes the entire system really difficult to control. That being said, most of the times the whole process ends within seconds, which is a really good result, considering the architecture. What I mean by that is that&nbsp;Linux is not suitable for real time applications. It does alright, but does not shine. The frequency detection method works fine, the tuning algorithm too, but servo control on Raspberry Pi is far from&nbsp;effective. This causes the servo to sometimes refuse&nbsp;to start, but other than that I am really happy with the&nbsp;AR-3606HB and Raspberry Pi combo, it turned out to be far more forgiving to inconsistent pulses - some other servos I tested would not work with the Pi at all!</p>
<p>The KeDei touchscreen I had so much trouble with was obviously needed for the GUI. I managed to get it working, and with some hacks in the code it works quite well.</p>
<p>In the end, I’ve decided to let go of multiprocessing, and opted for multithreading just for the non-blocking GUI. The algorithms no longer run parallel, because it made that much more mess and didn’t really improve anything. If my timings are correct, one loop takes about 40 ms, which considering the servo update frequency of 50 Hz could very well be almost exactly two pulses per loop. This might be a good talking point, but I have not checked how the RPI.GPIO library works or studied how the&nbsp;Pi handles pulses generation and code execution, so I wouldn’t know if this actually is as significant as it sounds to me. Definitely a lot more to learn in this field, and I’ve already got some projects with servos in mind, so this will eventually happen ;)</p>
<p>Anyway, check the short video below to see how it works.</p>
<iframe src="https://www.youtube.com/embed/UIllShJdyeE" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe>
<p>As always, you can see the <a href="https://github.com/zefj/guitar-tuning-system">code on Github</a>. The touchscreen and framebuffer issues made me&nbsp;seriously consider just&nbsp;building a GUI in Flask, HTML and CSS, and displaying a webpage on the screen. Having sorted that out, PyGame was my only option since it allows rendering stuff directly to the framebuffer (which means starting the app from the console without having to start X Server).&nbsp;Due to lack of references on how to properly structure everything PyGame&nbsp;GUI code (and Tkinter before)&nbsp;always somehow turns out to be a big mess. So don’t look into gui.py, I’ve never used the libraries before, I was in a hurry and it’s a mess.</p>
<p>This project is a big personal success, it proved that with enough determination you can gain knowledge and understanding in any field you want. It was fun to develop, less fun to write 70 pages about, but in the end the committee rated it highly and I received the highest possible grades, both for the thesis and defense.</p>
<p>So yeah, I’m an engineer :)</p> </article> <div class="flex items-center justify-between flex-col-reverse gap-6 sm:flex-row-reverse sm:gap-4 sm:items-end"> <button id="back-to-top" class="whitespace-nowrap focus-outline hover:opacity-75 py-1"> <svg xmlns="http://www.w3.org/2000/svg" class="rotate-90"> <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"></path> </svg> <span>Back to top</span> </button> </div>  </main> <footer class="px-4 w-full mt-auto"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-skin-line" aria-hidden="true"> </div> <div class="flex items-center justify-between flex-col py-6"> <div class="flex flex-wrap gap-4 justify-center"> <a href="/rss.xml" class="group hover:text-skin-accent inline-block undefined" title="RSS Feed"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 scale-110 w-6">  <path d="M19 20.001C19 11.729 12.271 5 4 5v2c7.168 0 13 5.832 13 13.001h2z"></path> <path d="M12 20.001h2C14 14.486 9.514 10 4 10v2c4.411 0 8 3.589 8 8.001z"></path> <circle cx="6" cy="18" r="2"></circle>  </svg> <span class="sr-only">RSS Feed</span> </a> <a href="https://github.com/zefj" class="group hover:text-skin-accent inline-block" title="See my GitHub profile"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
  </svg> <span class="sr-only">See my GitHub profile</span> </a><a href="https://www.linkedin.com/in/filiprec/" class="group hover:text-skin-accent inline-block" title="Add me on LinkedIn"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <rect x="4" y="4" width="16" height="16" rx="2"></rect>
    <line x1="8" y1="11" x2="8" y2="16"></line>
    <line x1="8" y1="8" x2="8" y2="8.01"></line>
    <line x1="12" y1="16" x2="12" y2="11"></line>
    <path d="M16 16v-3a2 2 0 0 0 -4 0"></path>
  </svg> <span class="sr-only">Add me on LinkedIn</span> </a><a href="mailto:filiprec@outlook.com" class="group hover:text-skin-accent inline-block" title="Drop me an email"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <rect x="3" y="5" width="18" height="14" rx="2"></rect>
      <polyline points="3 7 12 13 21 7"></polyline>
    </svg> <span class="sr-only">Drop me an email</span> </a> </div> </div> </footer> <script>function createProgressBar(){const o=document.createElement("div");o.className="progress-container fixed top-0 z-10 h-1 w-full bg-skin-fill";const e=document.createElement("div");e.className="progress-bar h-1 w-0 bg-skin-accent",e.id="myBar",o.appendChild(e),document.body.appendChild(o)}createProgressBar();function updateScrollProgress(){const o=document.body.scrollTop||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=o/e*100;if(document){const t=document.getElementById("myBar");t&&(t.style.width=n+"%")}}document.addEventListener("scroll",updateScrollProgress);function addHeadingLinks(){let o=Array.from(document.querySelectorAll("h2, h3, h4, h5, h6"));for(let e of o){e.classList.add("group");let n=document.createElement("a");n.innerText="#",n.className="heading-link hidden group-hover:inline-block ml-2",n.href="#"+e.id,n.ariaHidden="true",e.appendChild(n)}}addHeadingLinks();function attachCopyButtons(){let o="Copy",e=Array.from(document.querySelectorAll("pre"));for(let t of e){let c=document.createElement("div");c.style.position="relative";let d=document.createElement("button");d.className="copy-code absolute right-3 -top-3 rounded bg-skin-card px-2 py-1 text-xs leading-4 text-skin-base font-medium",d.innerHTML=o,t.setAttribute("tabindex","0"),t.appendChild(d),t?.parentNode?.insertBefore(c,t),c.appendChild(t),d.addEventListener("click",async()=>{await n(t,d)})}async function n(t,c){let r=t.querySelector("code")?.innerText;await navigator.clipboard.writeText(r??""),c.innerText="Copied",setTimeout(()=>{c.innerText=o},700)}}attachCopyButtons();function backToTop(){document.querySelector("#back-to-top")?.addEventListener("click",()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0})}backToTop();
</script>  </body></html>