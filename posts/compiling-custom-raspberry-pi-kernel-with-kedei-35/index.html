<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charset="UTF-8"><style>:where(img){height:auto}</style><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><link rel="canonical" href="https://frec.pl/posts/compiling-custom-raspberry-pi-kernel-with-kedei-35/"><meta name="generator" content="Astro v4.11.5"><!-- General Meta Tags --><title>Compiling custom Raspberry Pi kernel with KeDei 3.5" touchscreen V2 drivers | frec.pl</title><meta name="title" content="Compiling custom Raspberry Pi kernel with KeDei 3.5&quot; touchscreen V2 drivers | frec.pl"><meta name="description" content="My contribution to the Internet pollution"><meta name="author" content="Filip Rec"><link rel="sitemap" href="/sitemap-index.xml"><!-- Open Graph / Facebook --><meta property="og:title" content="Compiling custom Raspberry Pi kernel with KeDei 3.5&quot; touchscreen V2 drivers | frec.pl"><meta property="og:description" content="My contribution to the Internet pollution"><meta property="og:url" content="https://frec.pl/posts/compiling-custom-raspberry-pi-kernel-with-kedei-35/"><meta property="og:image" content="https://frec.pl/posts/compiling-custom-raspberry-pi-kernel-with-kedei-35-touchscreen-v2-drivers.png"><!-- Article Published/Modified time --><meta property="article:published_time" content="2015-01-01T00:00:00.000Z"><!-- Twitter --><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://frec.pl/posts/compiling-custom-raspberry-pi-kernel-with-kedei-35/"><meta property="twitter:title" content="Compiling custom Raspberry Pi kernel with KeDei 3.5&quot; touchscreen V2 drivers | frec.pl"><meta property="twitter:description" content="My contribution to the Internet pollution"><meta property="twitter:image" content="https://frec.pl/posts/compiling-custom-raspberry-pi-kernel-with-kedei-35-touchscreen-v2-drivers.png"><!-- Google Font --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital,wght@0,400;0,500;0,600;0,700;1,400;1,600&amp;display=swap" rel="stylesheet"><meta name="theme-color" content=""><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script src="/toggle-theme.js"></script><link rel="stylesheet" href="/assets/index.Y9pPA5Q9.css">
<style>@keyframes astroFadeInOut{0%{opacity:1}to{opacity:0}}@keyframes astroFadeIn{0%{opacity:0}}@keyframes astroFadeOut{to{opacity:0}}@keyframes astroSlideFromRight{0%{transform:translate(100%)}}@keyframes astroSlideFromLeft{0%{transform:translate(-100%)}}@keyframes astroSlideToRight{to{transform:translate(100%)}}@keyframes astroSlideToLeft{to{transform:translate(-100%)}}@media (prefers-reduced-motion){::view-transition-group(*),::view-transition-old(*),::view-transition-new(*){animation:none!important}[data-astro-transition-scope]{animation:none!important}}
</style><script type="module" src="/assets/hoisted.Oozc_hRb.js"></script><style>[data-astro-transition-scope=astro-fam6wyqg-1]{view-transition-name:compiling-custom-raspberry-pi-kernel-with-kedei-35-touchscreen-v2-drivers}@layer astro{::view-transition-old(compiling-custom-raspberry-pi-kernel-with-kedei-35-touchscreen-v2-drivers){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}::view-transition-new(compiling-custom-raspberry-pi-kernel-with-kedei-35-touchscreen-v2-drivers){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-old(compiling-custom-raspberry-pi-kernel-with-kedei-35-touchscreen-v2-drivers){animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back]::view-transition-new(compiling-custom-raspberry-pi-kernel-with-kedei-35-touchscreen-v2-drivers){animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}}[data-astro-transition-fallback=old] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition-fallback=old][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition-fallback=new] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition-fallback=new][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=old] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition=back][data-astro-transition-fallback=old][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeOut;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}[data-astro-transition=back][data-astro-transition-fallback=new] [data-astro-transition-scope=astro-fam6wyqg-1],[data-astro-transition=back][data-astro-transition-fallback=new][data-astro-transition-scope=astro-fam6wyqg-1]{animation-name:astroFadeIn;animation-duration:.18s;animation-timing-function:cubic-bezier(.76,0,.24,1);animation-fill-mode:both}</style></head> <body>  <header class="astro-3ef6ksr2"> <a id="skip-to-content" href="#main-content" class="astro-3ef6ksr2">Skip to content</a> <div class="astro-3ef6ksr2 nav-container"> <a href="/" class="astro-3ef6ksr2 logo whitespace-nowrap"> frec.pl </a> <nav id="nav-menu" class="astro-3ef6ksr2"> <ul id="menu-items" class="astro-3ef6ksr2 flex"> <li class="astro-3ef6ksr2"> <a href="/posts/" class="astro-3ef6ksr2">
Posts
</a> </li> <li class="astro-3ef6ksr2"> <label id="theme-button" for="dark-mode" class="astro-g6q3pnbr theme-button" aria-label="Switch theme" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <div class="astro-g6q3pnbr switch" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <input id="dark-mode" type="checkbox" class="astro-g6q3pnbr" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <div class="astro-g6q3pnbr insetcover" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"> <div class="astro-g6q3pnbr sun-moon sun" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> <div class="astro-g6q3pnbr sun-moon moon" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> <div class="astro-g6q3pnbr stars" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> </div> <div class="astro-g6q3pnbr sun-moon-shadow" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> <div class="astro-g6q3pnbr shadow-overlay" style="--stars:url(/assets/stars.SSJwYlZx.png);--clouds:url(/assets/clouds.D5-sntqg.png);--moonCrater:url(/assets/moonCrater.CDPYjhZE.png)"></div> </div> </label>  </li> </ul> </nav> </div> <div class="max-w-3xl mx-auto px-4"> <hr class="border-skin-line" aria-hidden="true"> </div> </header>  <main id="main-content" class="max-w-3xl mx-auto px-4 mt-8 pb-4 w-full"> <div class="mb-2"> <h1 class="font-semibold sm:text-3xl text-2xl">  <span class="text-skin-accent" data-astro-transition-scope="astro-fam6wyqg-1"> Compiling custom Raspberry Pi kernel with KeDei 3.5" touchscreen V2 drivers </span>  </h1> </div> <div class="mb-2">  <div class="flex flex-wrap items-center"><span class="text-base"><span class="sr-only">Published:</span><time datetime="2015-01-01T00:00:00.000Z" title="2015-01-01T00:00:00.000Z">Sometime in <!-- -->2015</time><span class="mx-1">•</span></span><div class="flex gap-1"><a href="/tags/electronics/" class="group hover:text-skin-accent whitespace-nowrap relative text-base underline underline-offset-4"><span>#<!-- -->electronics</span></a></div></div>  </div>    <article id="article" role="article" class="max-w-3xl mx-auto my-8 prose"> <p>I wanted to save a couple of bucks on a Raspberry Pi touchscreen, so I ordered one off aliexpress, thinking it would be a Waveshare knock-off, compatible with their drivers, fbtft or something. I was hoping for an easy set up, but that certainly was not the case. What I received was a <strong>KeDei 3.5 inch SPI TFT LCD, version 2</strong>. If you have one as well, you already probably know there’s a difference between V1 and V2. If you don’t, there’s not much for you to read here.</p>
<p>Anyway, after spending two days trying to get this thing to work I can finally share what I managed to figure out by research and a lot of trial and error. The seller provides a package with “drivers”. What they really are is just an old, custom kernel and two files to turn the screen on and off. However, this replaces the framebuffer, which means HDMI output is overridden and you need to restart your Pi every time you want to switch the console/X between LCD and HDMI. But most importantly: <strong>using those files replaces your kernel with a 3.18.x version</strong>. This is far from ideal, I need 4.x.x because of native support for my Wi-Fi dongle. Besides, it supposedly blocks any unused GPIO pins. To be honest, you can just give up on trying to download any files from your seller (mine provided a SCREENSHOT of a URL, a google drive one with a really long hash in it, can you believe that). Luckily, there’s a diff file from the manufacturer.</p>
<p>Before you read on, I strongly suggest you to <a href="http://heikki.virekunnas.fi/2015/raspberry-pi-tft/">read this post</a> (by Heikki Virekunnas) as well. The author found himself in a similar situation, however his screen is version 1, which means his package will not work for you, but might shed some light on what we’re doing here.</p>
<p>I’ve decided to try and compile my own kernel, from the latest release source files. This is your best shot if you want a working KeDei screen with a newer kernel. I’ve never done that, but it turned out to be fairly simple following the link above as well as some aid from Google Search and the <a href="https://www.raspberrypi.org/documentation/linux/kernel/building.md">official guide on building your custom kernel</a>. After downloading the Linux source files from github, you’re gonna have to patch it, paste a driver file into an appropriate directory, and create a config file. I’ve uploaded all the necessary files to <a href="https://github.com/zefj/kedei2-patchfiles">this repo</a>. You can hopefully figure out appropriate paths, all the directories and filenames are just as they are in the source files.</p>
<p>A quick explanation:</p>
<ul>
<li>The official diff file is broken as hell, won’t work because it misses some differences, and is built from comparing to an old kernel version, which means a lot of confusion if you try to patch it manually. If your linux source files match the release I used (<a href="https://github.com/raspberrypi/linux/commit/853eff4e9b369cdc20be7c538bc5a5291eeab31d">commit</a>), either use my patch file, or just directly copy-paste the files. If not, you can try to use the one Heikki provided in his post, it should work as well. If neither goes through, with little work you can figure out what needs to be added or commented out, and modify the code on your own.</li>
<li><code>.config</code> file is from Heikki, I ran it through make oldconfig and turned the ili9341 driver on afterwards</li>
<li>the <code>ili9341.c</code> driver is from the patch file supplied by the seller. There are two versions of this driver floating around the Internet, only the one in my repo works for V2 displays (and I also patched some errors, so you probably want to use that one)</li>
</ul>
<p>This is what happens if you follow Heikki’s TL;DR or compile the kernel with V1 drivers on a V2 screen (hint: the colours are inverted):</p>
<p><img src="/media/uploads/2015/12/25/rpiinve.jpg" alt="There used to be an image here, but I lost it. Sorry!" fetchpriority="high" decoding="async"></p>
<p>So, after 7 or 8 tries, it finally worked. By trial and error I was able to figure out the appropriate combination. I’ve used Heikki’s diff file, and the ili9341.c file from the “official” patch. I ran the .config through make oldconfig, manually made sure the ili9341 driver is turned on, and then compiled according to the guide. Cross compiling is the way to go, I used VirtualBox with Ubuntu 14.04 on it, and used raspberrypi/linux repo <a href="https://github.com/raspberrypi/linux/commit/853eff4e9b369cdc20be7c538bc5a5291eeab31d">commit</a>. You can surely figure out any missing dependencies.</p>
<p>After compiling and flashing it to your sd card, make sure to add <code>ili9341</code> and <code>fb_ili9341</code> to your <code>/etc/modules</code>. Doing that, ls /dev/ should report <code>/dev/fb0</code> (which would be your HDMI framebuffer), and <code>/dev/fb1</code> (the LCD). If that is the case, you can use the con2fbmap 1 1 and con2fbmap 1 0 commands in headless mode to change between them. If you want to boot X to your LCD, go to <code>/usr/share/X11/xorg.conf/99-fbturbo.conf</code> and change <code>fb0</code> to <code>fb1</code>.</p>
<p>And that should do it. You can now enjoy the latest kernel with support for your new cheap touchscreen.</p>
<p><img src="/media/uploads/2015/12/25/rpinorm.jpg" alt="There used to be an image here, but I lost it. Sorry!" loading="lazy" decoding="async"></p>
<hr>
<h1 id="tldr">TL;DR:</h1>
<p>There’s a (hopefully complete) list of steps:</p>
<ol>
<li>Clone repos</li>
</ol>
<pre class="astro-code vitesse-dark" style="color:#dbd7caee;white-space:pre-wrap;word-wrap:break-word;background-color:#121212;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B8A965">cd</span><span style="color:#C98A7D"> /home/user/</span></span>
<span class="line"><span style="color:#80A665">git</span><span style="color:#C98A7D"> clone</span><span style="color:#C98A7D"> https://github.com/raspberrypi/tools</span></span>
<span class="line"><span style="color:#CB7676">export</span><span style="color:#BD976A"> CCPREFIX</span><span style="color:#666">=</span><span style="color:#DBD7CAEE">/</span><span style="color:#BD976A">home</span><span style="color:#DBD7CAEE">/</span><span style="color:#BD976A">user</span><span style="color:#DBD7CAEE">/</span><span style="color:#BD976A">tools</span><span style="color:#DBD7CAEE">/</span><span style="color:#BD976A">arm-bcm2708</span><span style="color:#DBD7CAEE">/</span><span style="color:#BD976A">gcc-linaro-arm-linux-gnueabihf-raspbian</span><span style="color:#DBD7CAEE">/</span><span style="color:#BD976A">bin</span><span style="color:#DBD7CAEE">/</span><span style="color:#BD976A">arm-linux-gnueabihf-</span></span>
<span class="line"><span style="color:#80A665">git</span><span style="color:#C98A7D"> clone</span><span style="color:#C99076"> --depth=1</span><span style="color:#C98A7D"> https://github.com/raspberrypi/linux</span></span>
<span class="line"><span style="color:#80A665">git</span><span style="color:#C98A7D"> clone</span><span style="color:#C98A7D"> https://github.com/zefj/kedei2-patchfiles</span></span>
<span class="line"></span></code></pre>
<p>Make sure your variable works fine by running <code>{'${CCPREFIX}'}gcc -v</code>, if the returned wall of text is different than <code>gcc -v</code>, and there don’t seem to be any errors, you’re fine.</p>
<ol start="2">
<li>Patch source files</li>
</ol>
<pre class="astro-code vitesse-dark" style="color:#dbd7caee;white-space:pre-wrap;word-wrap:break-word;background-color:#121212;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B8A965">cd</span><span style="color:#C98A7D"> linux/</span></span>
<span class="line"><span style="color:#80A665">cat</span><span style="color:#C98A7D"> /home/user/kedei2-patchfiles/kedei-diff.patch</span><span style="color:#CB7676"> |</span><span style="color:#80A665"> patch</span><span style="color:#C99076"> -p1</span></span>
<span class="line"><span style="color:#80A665">cp</span><span style="color:#C98A7D"> /home/user/kedei2-patchfiles/drivers/video/fbdev/ili9341.c</span><span style="color:#C98A7D"> drivers/video/fbdev/ili9341.c</span></span>
<span class="line"><span style="color:#80A665">cp</span><span style="color:#C98A7D"> /home/user/kedei2-patchfiles/.config</span><span style="color:#C98A7D"> .config</span></span>
<span class="line"></span></code></pre>
<p>OR</p>
<pre class="astro-code vitesse-dark" style="color:#dbd7caee;white-space:pre-wrap;word-wrap:break-word;background-color:#121212;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#80A665">cp</span><span style="color:#C99076"> -r</span><span style="color:#C98A7D"> kedei2-patchfiles/.</span><span style="color:#C98A7D"> linux/</span></span>
<span class="line"></span></code></pre>
<p>OR</p>
<p>Use the patch from <a href="http://heikki.virekunnas.fi/wp-content/uploads/sites/2/2015/08/ili9341_patch.diff">http://heikki.virekunnas.fi/wp-content/uploads/sites/2/2015/08/ili9341_patch.diff</a>, and the <code>ili9341.c</code> driver and <code>.config</code> from my repo.</p>
<p>Make sure every file is patched! Changes to <code>bcm2708.c</code>, <code>bcm2709.c</code>, <code>Kconfig</code> and <code>Makefile</code> in directories as in my repo. You also need <code>ili9341.c</code> present.</p>
<ol start="3">
<li>Create config file</li>
</ol>
<pre class="astro-code vitesse-dark" style="color:#dbd7caee;white-space:pre-wrap;word-wrap:break-word;background-color:#121212;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B8A965">cd</span><span style="color:#C98A7D"> linux/</span></span>
<span class="line"><span style="color:#80A665">make</span><span style="color:#C98A7D"> ARCH=arm</span><span style="color:#C98A7D"> CROSS_COMPILE=</span><span style="color:#C99076">\$</span><span style="color:#C98A7D">{CCPREFIX}</span><span style="color:#C98A7D"> oldconfig</span></span>
<span class="line"></span></code></pre>
<p>This will take the config file and run it against the kernel to check for any missing options. You need to edit it manually after it returns to make sure <code>CONFIG_FB_ILI9341</code> is set to <code>m</code>. Just search for it, remember to delete the leading hash if there is one.</p>
<ol start="4">
<li>Compile!</li>
</ol>
<pre class="astro-code vitesse-dark" style="color:#dbd7caee;white-space:pre-wrap;word-wrap:break-word;background-color:#121212;overflow-x:auto" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#80A665">​make</span><span style="color:#C98A7D"> ARCH=arm</span><span style="color:#C98A7D"> CROSS_COMPILE=</span><span style="color:#C99076">\$</span><span style="color:#C98A7D">{CCPREFIX}</span><span style="color:#C98A7D"> zImage</span><span style="color:#C98A7D"> modules</span><span style="color:#C98A7D"> dtbs</span></span>
<span class="line"></span></code></pre>
<ol start="5">
<li>Move the files to your Raspberry Pi SD card according to the ‘install directly onto the sd card’ section in the official kernel building guide.</li>
</ol> </article> <div class="flex justify-between flex-row-reverse items-end"> <button id="back-to-top" class="group hover:text-skin-accent whitespace-nowrap"> <svg xmlns="http://www.w3.org/2000/svg" class="rotate-90"> <path d="M13.293 6.293 7.586 12l5.707 5.707 1.414-1.414L10.414 12l4.293-4.293z"></path> </svg>
Back to top
</button> </div>  </main> <footer class="px-4 w-full mt-auto"> <div class="max-w-3xl mx-auto px-0"> <hr class="border-skin-line" aria-hidden="true"> </div> <div class="flex items-center flex-col justify-between py-6"> <div class="flex flex-wrap gap-4 justify-center"> <a href="/rss.xml" class="group hover:text-skin-accent inline-block undefined" title="RSS Feed"> <svg xmlns="http://www.w3.org/2000/svg" class="h-6 scale-110 w-6">  <path d="M19 20.001C19 11.729 12.271 5 4 5v2c7.168 0 13 5.832 13 13.001h2z"></path> <path d="M12 20.001h2C14 14.486 9.514 10 4 10v2c4.411 0 8 3.589 8 8.001z"></path> <circle cx="6" cy="18" r="2"></circle>  </svg> <span class="sr-only">RSS Feed</span> </a> <a href="https://github.com/zefj" class="group hover:text-skin-accent inline-block" title="See my GitHub profile"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"></path>
  </svg> <span class="sr-only">See my GitHub profile</span> </a><a href="https://www.linkedin.com/in/filiprec/" class="group hover:text-skin-accent inline-block" title="Add me on LinkedIn"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
    <rect x="4" y="4" width="16" height="16" rx="2"></rect>
    <line x1="8" y1="11" x2="8" y2="16"></line>
    <line x1="8" y1="8" x2="8" y2="8.01"></line>
    <line x1="12" y1="16" x2="12" y2="11"></line>
    <path d="M16 16v-3a2 2 0 0 0 -4 0"></path>
  </svg> <span class="sr-only">Add me on LinkedIn</span> </a><a href="mailto:filiprec@outlook.com" class="group hover:text-skin-accent inline-block" title="Drop me an email"> <svg xmlns="http://www.w3.org/2000/svg" class="icon-tabler" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
      <rect x="3" y="5" width="18" height="14" rx="2"></rect>
      <polyline points="3 7 12 13 21 7"></polyline>
    </svg> <span class="sr-only">Drop me an email</span> </a> </div> </div> </footer> <script>function createProgressBar(){const o=document.createElement("div");o.className="progress-container fixed top-0 z-10 h-1 w-full bg-skin-fill";const e=document.createElement("div");e.className="progress-bar h-1 w-0 bg-skin-accent",e.id="myBar",o.appendChild(e),document.body.appendChild(o)}createProgressBar();function updateScrollProgress(){const o=document.body.scrollTop||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=o/e*100;if(document){const t=document.getElementById("myBar");t&&(t.style.width=n+"%")}}document.addEventListener("scroll",updateScrollProgress);function addHeadingLinks(){let o=Array.from(document.querySelectorAll("h2, h3, h4, h5, h6"));for(let e of o){e.classList.add("group");let n=document.createElement("a");n.innerText="#",n.className="heading-link hidden group-hover:inline-block ml-2",n.href="#"+e.id,n.ariaHidden="true",e.appendChild(n)}}addHeadingLinks();function attachCopyButtons(){let o="Copy",e=Array.from(document.querySelectorAll("pre"));for(let t of e){let c=document.createElement("div");c.style.position="relative";let d=document.createElement("button");d.className="copy-code absolute right-3 -top-3 rounded bg-skin-card px-2 py-1 text-xs leading-4 text-skin-base font-medium",d.innerHTML=o,t.setAttribute("tabindex","0"),t.appendChild(d),t?.parentNode?.insertBefore(c,t),c.appendChild(t),d.addEventListener("click",async()=>{await n(t,d)})}async function n(t,c){let r=t.querySelector("code")?.innerText;await navigator.clipboard.writeText(r??""),c.innerText="Copied",setTimeout(()=>{c.innerText=o},700)}}attachCopyButtons();function backToTop(){document.querySelector("#back-to-top")?.addEventListener("click",()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0})}backToTop();
</script>  </body></html>